---
import HomeBlogItem from "./HomeBlogItem.astro";
import type { BlogPost } from "../types";

const allBlogs = Object.values(import.meta.glob<BlogPost>("src/pages/blog/*.md", { eager: true }));

const latestThreeBlogs = allBlogs
  .sort(
    (a, b) => new Date(b.frontmatter.pubDate).getTime() - new Date(a.frontmatter.pubDate).getTime()
  )
  .slice(0, 3);
---

<ul class="p-4 space-y-4">
  {
    latestThreeBlogs.map(({ frontmatter, url }) => (
      <HomeBlogItem frontmatter={frontmatter} url={url} />
    ))
  }
</ul>
